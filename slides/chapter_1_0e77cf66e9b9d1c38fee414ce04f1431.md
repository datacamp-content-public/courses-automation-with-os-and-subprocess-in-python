---
title: Insert title here
key: 0e77cf66e9b9d1c38fee414ce04f1431

---
## Capture output of shell commands

```yaml
type: "TitleSlide"
key: "f029cd9362"
```

`@lower_third`

name: Noah Gift
title: Lecturer, Northwestern & UC Davis | Founder, Pragmatic AI Labs


`@script`
This lesson covers capturing the output of shell commands using the subprocess.run module


---
## Using the subprocess.Popen module

```yaml
type: "FullSlide"
key: "5fcd059c0a"
```

`@part1`
- Captures the output of shell commands
- Preferred method of capturing output


`@script`
_ subprocess.Popen module is used for capturing the output of a process.
- Preferred way of capturing output from python 2.7-3.6
- It should be noted that in Python 3.7, it is possible to use....
 
subprocess.run with  capture_output=True parameter to accomplish the same thing as Popen


---
## "with" statement

```yaml
type: "FullSlide"
key: "d35cf4854b"
```

`@part1`
- Can use the context manager via"with" statement, i.e.:

      with Popen(["ls"], stdout=PIPE) as proc:


- "with" statement simplifies using Popen


`@script`
- Can use context manager via "with" statement as below:

- With statement simplifies using Popen, on exit the "with statement"....

- automatically waits for process to finish
- automatically closes file descriptors


---
## Breaking down a real example

```yaml
type: "FullSlide"
key: "e25942afc8"
```

`@part1`
- Making files


     !touch /tmp/foo.txt /tmp/bar.txt



- Using subprocess


     from subprocess import (Popen, PIPE

     with Popen(["ls", "/tmp"], stdout=PIPE) as proc:    
          result = proc.stdout.readlines()


`@script`
- Make a couple of files using IPython shell
- import Popen and PIPE from subprocess


---
## Analyzing Results

```yaml
type: "FullCodeSlide"
key: "87c103b38f"
```

`@part1`
- printing raw result

      print(result)

      [b'bar.txt\n', b'foo.txt\n']
- print each file

      for file in result:
         print(file.strip())

      b'bar.txt'
      b'foo.txt'


`@script`
- The result variable can be printed to show raw results

- All of the files can be printed out one by one and the newlines can be stripped with a for loop


---
## Practicing with the subprocess.Popen module

```yaml
type: "FinalSlide"
key: "7ebefa0b03"
```

`@script`
- Next let's practice what was covered in the lesson.
- The next section will test your knowledge on using Popen to:
  - capture the output of shell commands
  - use the with context manager  
  - pipe the output to stdout
  - format the results and print them out

